<div class="classes-container">
    <!-- Header -->
    <div class="page-header">
        <div class="header-content">
            <h1><i class="fas fa-users"></i> Turmas</h1>
            <button class="zen-button primary" (click)="createClass()">
                <i class="fas fa-plus"></i> Nova Turma
            </button>
        </div>
    </div>

    <!-- Filters -->
    <div class="filters-card">
        <div class="filter-row">
            <div class="filter-group">
                <label>Pesquisar</label>
                <input type="text" class="zen-input" [(ngModel)]="searchTerm" (ngModelChange)="loadClasses()"
                    placeholder="Nome ou código..." />
            </div>
            <div class="filter-group">
                <label>Ano Letivo</label>
                <select class="zen-select" [(ngModel)]="filterSchoolYear" (ngModelChange)="loadClasses()">
                    <option [ngValue]="null">Todos</option>
                    <option *ngFor="let year of years" [ngValue]="year">{{year}}</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Status</label>
                <select class="zen-select" [(ngModel)]="filterActive" (ngModelChange)="loadClasses()">
                    <option [ngValue]="null">Todos</option>
                    <option [ngValue]="true">Ativas</option>
                    <option [ngValue]="false">Inativas</option>
                </select>
            </div>
            <button class="zen-button secondary" (click)="clearFilters()" style="margin-top: 24px;">
                <i class="fas fa-times"></i> Limpar
            </button>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-state">
        <div class="spinner"></div>
        <p>Carregando turmas...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && classes.totalCount === 0" class="empty-state">
        <i class="fas fa-users"></i>
        <p>Nenhuma turma encontrada</p>
        <button class="zen-button primary" (click)="createClass()">
            <i class="fas fa-plus"></i> Criar Primeira Turma
        </button>
    </div>

    <!-- Table -->
    <div *ngIf="!loading && classes.totalCount > 0" class="table-card">
        <table class="zen-table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Código</th>
                    <th>Série</th>
                    <th>Turno</th>
                    <th>Ano Letivo</th>
                    <th>Status</th>
                    <th class="actions-column">Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let class of classes.items">
                    <td class="class-name">
                        <i class="fas fa-users class-icon"></i>
                        {{class.name}}
                    </td>
                    <td><span class="code-badge">{{class.code}}</span></td>
                    <td>{{getGradeLevelLabel(class.gradeLevel)}}</td>
                    <td>{{getShiftLabel(class.shift)}}</td>
                    <td class="year-cell">{{class.schoolYear}}</td>
                    <td>
                        <span class="status-badge" [class.active]="class.isActive" [class.inactive]="!class.isActive">
                            {{ class.isActive ? 'Ativa' : 'Inativa' }}
                        </span>
                    </td>
                    <td class="actions-column">
                        <button class="zen-icon-button" (click)="editClass(class.id!)" title="Editar">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="zen-icon-button delete" (click)="deleteClass(class)" title="Excluir">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="table-footer">
            <span class="total-count">{{classes.totalCount}} turma(s) encontrada(s)</span>
        </div>
    </div>
</div>